{
"version":3,
"file":"module$node_modules$resource_loader$dist$resource_loader_cjs.js",
"lineCount":44,
"mappings":"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",
"sources":["node_modules/resource-loader/dist/resource-loader.cjs.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$resource_loader$dist$resource_loader_cjs\"] = function(global,require,module,exports) {\n/*!\n * resource-loader - v3.0.1\n * https://github.com/pixijs/pixi-sound\n * Compiled Tue, 02 Jul 2019 14:06:18 UTC\n *\n * resource-loader is licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar parseUri = _interopDefault(require('parse-uri'));\nvar Signal = _interopDefault(require('mini-signals'));\n\n/**\n * Smaller version of the async library constructs.\n *\n * @namespace async\n */\n\n/**\n * Noop function\n *\n * @ignore\n * @function\n * @memberof async\n */\nfunction _noop() {}\n/* empty */\n\n/**\n * Iterates an array in series.\n *\n * @memberof async\n * @function eachSeries\n * @param {Array.<*>} array - Array to iterate.\n * @param {function} iterator - Function to call for each element.\n * @param {function} callback - Function to call when done, or on error.\n * @param {boolean} [deferNext=false] - Break synchronous each loop by calling next with a setTimeout of 1.\n */\n\n\nfunction eachSeries(array, iterator, callback, deferNext) {\n  var i = 0;\n  var len = array.length;\n\n  (function next(err) {\n    if (err || i === len) {\n      if (callback) {\n        callback(err);\n      }\n\n      return;\n    }\n\n    if (deferNext) {\n      setTimeout(function () {\n        iterator(array[i++], next);\n      }, 1);\n    } else {\n      iterator(array[i++], next);\n    }\n  })();\n}\n/**\n * Ensures a function is only called once.\n *\n * @ignore\n * @memberof async\n * @param {function} fn - The function to wrap.\n * @return {function} The wrapping function.\n */\n\nfunction onlyOnce(fn) {\n  return function onceWrapper() {\n    if (fn === null) {\n      throw new Error('Callback was already called.');\n    }\n\n    var callFn = fn;\n    fn = null;\n    callFn.apply(this, arguments);\n  };\n}\n/**\n * Async queue implementation,\n *\n * @memberof async\n * @function queue\n * @param {function} worker - The worker function to call for each task.\n * @param {number} concurrency - How many workers to run in parrallel.\n * @return {*} The async queue object.\n */\n\n\nfunction queue(worker, concurrency) {\n  if (concurrency == null) {\n    // eslint-disable-line no-eq-null,eqeqeq\n    concurrency = 1;\n  } else if (concurrency === 0) {\n    throw new Error('Concurrency must not be zero');\n  }\n\n  var workers = 0;\n  var q = {\n    _tasks: [],\n    concurrency: concurrency,\n    saturated: _noop,\n    unsaturated: _noop,\n    buffer: concurrency / 4,\n    empty: _noop,\n    drain: _noop,\n    error: _noop,\n    started: false,\n    paused: false,\n    push: function push(data, callback) {\n      _insert(data, false, callback);\n    },\n    kill: function kill() {\n      workers = 0;\n      q.drain = _noop;\n      q.started = false;\n      q._tasks = [];\n    },\n    unshift: function unshift(data, callback) {\n      _insert(data, true, callback);\n    },\n    process: function process() {\n      while (!q.paused && workers < q.concurrency && q._tasks.length) {\n        var task = q._tasks.shift();\n\n        if (q._tasks.length === 0) {\n          q.empty();\n        }\n\n        workers += 1;\n\n        if (workers === q.concurrency) {\n          q.saturated();\n        }\n\n        worker(task.data, onlyOnce(_next(task)));\n      }\n    },\n    length: function length() {\n      return q._tasks.length;\n    },\n    running: function running() {\n      return workers;\n    },\n    idle: function idle() {\n      return q._tasks.length + workers === 0;\n    },\n    pause: function pause() {\n      if (q.paused === true) {\n        return;\n      }\n\n      q.paused = true;\n    },\n    resume: function resume() {\n      if (q.paused === false) {\n        return;\n      }\n\n      q.paused = false; // Need to call q.process once per concurrent\n      // worker to preserve full concurrency after pause\n\n      for (var w = 1; w <= q.concurrency; w++) {\n        q.process();\n      }\n    }\n  };\n\n  function _insert(data, insertAtFront, callback) {\n    if (callback != null && typeof callback !== 'function') {\n      // eslint-disable-line no-eq-null,eqeqeq\n      throw new Error('task callback must be a function');\n    }\n\n    q.started = true;\n\n    if (data == null && q.idle()) {\n      // eslint-disable-line no-eq-null,eqeqeq\n      // call drain immediately if there are no tasks\n      setTimeout(function () {\n        return q.drain();\n      }, 1);\n      return;\n    }\n\n    var item = {\n      data: data,\n      callback: typeof callback === 'function' ? callback : _noop\n    };\n\n    if (insertAtFront) {\n      q._tasks.unshift(item);\n    } else {\n      q._tasks.push(item);\n    }\n\n    setTimeout(function () {\n      return q.process();\n    }, 1);\n  }\n\n  function _next(task) {\n    return function next() {\n      workers -= 1;\n      task.callback.apply(task, arguments);\n\n      if (arguments[0] != null) {\n        // eslint-disable-line no-eq-null,eqeqeq\n        q.error(arguments[0], task.data);\n      }\n\n      if (workers <= q.concurrency - q.buffer) {\n        q.unsaturated();\n      }\n\n      if (q.idle()) {\n        q.drain();\n      }\n\n      q.process();\n    };\n  }\n\n  return q;\n}\n\nvar async = ({\n    eachSeries: eachSeries,\n    queue: queue\n});\n\n// a simple in-memory cache for resources\nvar cache = {};\n/**\n * A simple in-memory cache for resource.\n *\n * @memberof middleware\n * @function caching\n * @example\n * import { Loader, middleware } from 'resource-loader';\n * const loader = new Loader();\n * loader.use(middleware.caching);\n * @param {Resource} resource - Current Resource\n * @param {function} next - Callback when complete\n */\n\nfunction caching(resource, next) {\n  var _this = this;\n\n  // if cached, then set data and complete the resource\n  if (cache[resource.url]) {\n    resource.data = cache[resource.url];\n    resource.complete(); // marks resource load complete and stops processing before middlewares\n  } // if not cached, wait for complete and store it in the cache.\n  else {\n      resource.onComplete.once(function () {\n        return cache[_this.url] = _this.data;\n      });\n    }\n\n  next();\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar useXdr = !!(window.XDomainRequest && !('withCredentials' in new XMLHttpRequest()));\nvar tempAnchor = null; // some status constants\n\nvar STATUS_NONE = 0;\nvar STATUS_OK = 200;\nvar STATUS_EMPTY = 204;\nvar STATUS_IE_BUG_EMPTY = 1223;\nvar STATUS_TYPE_OK = 2; // noop\n\nfunction _noop$1() {}\n/* empty */\n\n/**\n * Manages the state and loading of a resource and all child resources.\n *\n * @class\n */\n\n\nvar Resource =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Sets the load type to be used for a specific extension.\n   *\n   * @static\n   * @param {string} extname - The extension to set the type for, e.g. \"png\" or \"fnt\"\n   * @param {Resource.LOAD_TYPE} loadType - The load type to set it to.\n   */\n  Resource.setExtensionLoadType = function setExtensionLoadType(extname, loadType) {\n    setExtMap(Resource._loadTypeMap, extname, loadType);\n  }\n  /**\n   * Sets the load type to be used for a specific extension.\n   *\n   * @static\n   * @param {string} extname - The extension to set the type for, e.g. \"png\" or \"fnt\"\n   * @param {Resource.XHR_RESPONSE_TYPE} xhrType - The xhr type to set it to.\n   */\n  ;\n\n  Resource.setExtensionXhrType = function setExtensionXhrType(extname, xhrType) {\n    setExtMap(Resource._xhrTypeMap, extname, xhrType);\n  }\n  /**\n   * @param {string} name - The name of the resource to load.\n   * @param {string|string[]} url - The url for this resource, for audio/video loads you can pass\n   *      an array of sources.\n   * @param {object} [options] - The options for the load.\n   * @param {string|boolean} [options.crossOrigin] - Is this request cross-origin? Default is to\n   *      determine automatically.\n   * @param {number} [options.timeout=0] - A timeout in milliseconds for the load. If the load takes\n   *      longer than this time it is cancelled and the load is considered a failure. If this value is\n   *      set to `0` then there is no explicit timeout.\n   * @param {Resource.LOAD_TYPE} [options.loadType=Resource.LOAD_TYPE.XHR] - How should this resource\n   *      be loaded?\n   * @param {Resource.XHR_RESPONSE_TYPE} [options.xhrType=Resource.XHR_RESPONSE_TYPE.DEFAULT] - How\n   *      should the data being loaded be interpreted when using XHR?\n   * @param {Resource.IMetadata} [options.metadata] - Extra configuration for middleware and the Resource object.\n   */\n  ;\n\n  function Resource(name, url, options) {\n    if (typeof name !== 'string' || typeof url !== 'string') {\n      throw new Error('Both name and url are required for constructing a resource.');\n    }\n\n    options = options || {};\n    /**\n     * The state flags of this resource.\n     *\n     * @private\n     * @member {number}\n     */\n\n    this._flags = 0; // set data url flag, needs to be set early for some _determineX checks to work.\n\n    this._setFlag(Resource.STATUS_FLAGS.DATA_URL, url.indexOf('data:') === 0);\n    /**\n     * The name of this resource.\n     *\n     * @readonly\n     * @member {string}\n     */\n\n\n    this.name = name;\n    /**\n     * The url used to load this resource.\n     *\n     * @readonly\n     * @member {string}\n     */\n\n    this.url = url;\n    /**\n     * The extension used to load this resource.\n     *\n     * @readonly\n     * @member {string}\n     */\n\n    this.extension = this._getExtension();\n    /**\n     * The data that was loaded by the resource.\n     *\n     * @member {any}\n     */\n\n    this.data = null;\n    /**\n     * Is this request cross-origin? If unset, determined automatically.\n     *\n     * @member {string}\n     */\n\n    this.crossOrigin = options.crossOrigin === true ? 'anonymous' : options.crossOrigin;\n    /**\n     * A timeout in milliseconds for the load. If the load takes longer than this time\n     * it is cancelled and the load is considered a failure. If this value is set to `0`\n     * then there is no explicit timeout.\n     *\n     * @member {number}\n     */\n\n    this.timeout = options.timeout || 0;\n    /**\n     * The method of loading to use for this resource.\n     *\n     * @member {Resource.LOAD_TYPE}\n     */\n\n    this.loadType = options.loadType || this._determineLoadType();\n    /**\n     * The type used to load the resource via XHR. If unset, determined automatically.\n     *\n     * @member {string}\n     */\n\n    this.xhrType = options.xhrType;\n    /**\n     * Extra info for middleware, and controlling specifics about how the resource loads.\n     *\n     * Note that if you pass in a `loadElement`, the Resource class takes ownership of it.\n     * Meaning it will modify it as it sees fit.\n     *\n     * @member {Resource.IMetadata}\n     */\n\n    this.metadata = options.metadata || {};\n    /**\n     * The error that occurred while loading (if any).\n     *\n     * @readonly\n     * @member {Error}\n     */\n\n    this.error = null;\n    /**\n     * The XHR object that was used to load this resource. This is only set\n     * when `loadType` is `Resource.LOAD_TYPE.XHR`.\n     *\n     * @readonly\n     * @member {XMLHttpRequest}\n     */\n\n    this.xhr = null;\n    /**\n     * The child resources this resource owns.\n     *\n     * @readonly\n     * @member {Resource[]}\n     */\n\n    this.children = [];\n    /**\n     * The resource type.\n     *\n     * @readonly\n     * @member {Resource.TYPE}\n     */\n\n    this.type = Resource.TYPE.UNKNOWN;\n    /**\n     * The progress chunk owned by this resource.\n     *\n     * @readonly\n     * @member {number}\n     */\n\n    this.progressChunk = 0;\n    /**\n     * The `dequeue` method that will be used a storage place for the async queue dequeue method\n     * used privately by the loader.\n     *\n     * @private\n     * @member {function}\n     */\n\n    this._dequeue = _noop$1;\n    /**\n     * Used a storage place for the on load binding used privately by the loader.\n     *\n     * @private\n     * @member {function}\n     */\n\n    this._onLoadBinding = null;\n    /**\n     * The timer for element loads to check if they timeout.\n     *\n     * @private\n     * @member {number}\n     */\n\n    this._elementTimer = 0;\n    /**\n     * The `complete` function bound to this resource's context.\n     *\n     * @private\n     * @member {function}\n     */\n\n    this._boundComplete = this.complete.bind(this);\n    /**\n     * The `_onError` function bound to this resource's context.\n     *\n     * @private\n     * @member {function}\n     */\n\n    this._boundOnError = this._onError.bind(this);\n    /**\n     * The `_onProgress` function bound to this resource's context.\n     *\n     * @private\n     * @member {function}\n     */\n\n    this._boundOnProgress = this._onProgress.bind(this);\n    /**\n     * The `_onTimeout` function bound to this resource's context.\n     *\n     * @private\n     * @member {function}\n     */\n\n    this._boundOnTimeout = this._onTimeout.bind(this); // xhr callbacks\n\n    this._boundXhrOnError = this._xhrOnError.bind(this);\n    this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this);\n    this._boundXhrOnAbort = this._xhrOnAbort.bind(this);\n    this._boundXhrOnLoad = this._xhrOnLoad.bind(this);\n    /**\n     * Dispatched when the resource beings to load.\n     *\n     * The callback looks like {@link Resource.OnStartSignal}.\n     *\n     * @member {Signal<Resource.OnStartSignal>}\n     */\n\n    this.onStart = new Signal();\n    /**\n     * Dispatched each time progress of this resource load updates.\n     * Not all resources types and loader systems can support this event\n     * so sometimes it may not be available. If the resource\n     * is being loaded on a modern browser, using XHR, and the remote server\n     * properly sets Content-Length headers, then this will be available.\n     *\n     * The callback looks like {@link Resource.OnProgressSignal}.\n     *\n     * @member {Signal<Resource.OnProgressSignal>}\n     */\n\n    this.onProgress = new Signal();\n    /**\n     * Dispatched once this resource has loaded, if there was an error it will\n     * be in the `error` property.\n     *\n     * The callback looks like {@link Resource.OnCompleteSignal}.\n     *\n     * @member {Signal<Resource.OnCompleteSignal>}\n     */\n\n    this.onComplete = new Signal();\n    /**\n     * Dispatched after this resource has had all the *after* middleware run on it.\n     *\n     * The callback looks like {@link Resource.OnCompleteSignal}.\n     *\n     * @member {Signal<Resource.OnCompleteSignal>}\n     */\n\n    this.onAfterMiddleware = new Signal();\n  }\n  /**\n   * When the resource starts to load.\n   *\n   * @memberof Resource\n   * @callback OnStartSignal\n   * @param {Resource} resource - The resource that the event happened on.\n   */\n\n  /**\n   * When the resource reports loading progress.\n   *\n   * @memberof Resource\n   * @callback OnProgressSignal\n   * @param {Resource} resource - The resource that the event happened on.\n   * @param {number} percentage - The progress of the load in the range [0, 1].\n   */\n\n  /**\n   * When the resource finishes loading.\n   *\n   * @memberof Resource\n   * @callback OnCompleteSignal\n   * @param {Resource} resource - The resource that the event happened on.\n   */\n\n  /**\n   * @memberof Resource\n   * @typedef {object} IMetadata\n   * @property {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [loadElement=null] - The\n   *      element to use for loading, instead of creating one.\n   * @property {boolean} [skipSource=false] - Skips adding source(s) to the load element. This\n   *      is useful if you want to pass in a `loadElement` that you already added load sources to.\n   * @property {string|string[]} [mimeType] - The mime type to use for the source element\n   *      of a video/audio elment. If the urls are an array, you can pass this as an array as well\n   *      where each index is the mime type to use for the corresponding url index.\n   */\n\n  /**\n   * Stores whether or not this url is a data url.\n   *\n   * @readonly\n   * @member {boolean}\n   */\n\n\n  var _proto = Resource.prototype;\n\n  /**\n   * Marks the resource as complete.\n   *\n   */\n  _proto.complete = function complete() {\n    this._clearEvents();\n\n    this._finish();\n  }\n  /**\n   * Aborts the loading of this resource, with an optional message.\n   *\n   * @param {string} message - The message to use for the error\n   */\n  ;\n\n  _proto.abort = function abort(message) {\n    // abort can be called multiple times, ignore subsequent calls.\n    if (this.error) {\n      return;\n    } // store error\n\n\n    this.error = new Error(message); // clear events before calling aborts\n\n    this._clearEvents(); // abort the actual loading\n\n\n    if (this.xhr) {\n      this.xhr.abort();\n    } else if (this.xdr) {\n      this.xdr.abort();\n    } else if (this.data) {\n      // single source\n      if (this.data.src) {\n        this.data.src = Resource.EMPTY_GIF;\n      } // multi-source\n      else {\n          while (this.data.firstChild) {\n            this.data.removeChild(this.data.firstChild);\n          }\n        }\n    } // done now.\n\n\n    this._finish();\n  }\n  /**\n   * Kicks off loading of this resource. This method is asynchronous.\n   *\n   * @param {Resource.OnCompleteSignal} [cb] - Optional callback to call once the resource is loaded.\n   */\n  ;\n\n  _proto.load = function load(cb) {\n    var _this = this;\n\n    if (this.isLoading) {\n      return;\n    }\n\n    if (this.isComplete) {\n      if (cb) {\n        setTimeout(function () {\n          return cb(_this);\n        }, 1);\n      }\n\n      return;\n    } else if (cb) {\n      this.onComplete.once(cb);\n    }\n\n    this._setFlag(Resource.STATUS_FLAGS.LOADING, true);\n\n    this.onStart.dispatch(this); // if unset, determine the value\n\n    if (this.crossOrigin === false || typeof this.crossOrigin !== 'string') {\n      this.crossOrigin = this._determineCrossOrigin(this.url);\n    }\n\n    switch (this.loadType) {\n      case Resource.LOAD_TYPE.IMAGE:\n        this.type = Resource.TYPE.IMAGE;\n\n        this._loadElement('image');\n\n        break;\n\n      case Resource.LOAD_TYPE.AUDIO:\n        this.type = Resource.TYPE.AUDIO;\n\n        this._loadSourceElement('audio');\n\n        break;\n\n      case Resource.LOAD_TYPE.VIDEO:\n        this.type = Resource.TYPE.VIDEO;\n\n        this._loadSourceElement('video');\n\n        break;\n\n      case Resource.LOAD_TYPE.XHR:\n      /* falls through */\n\n      default:\n        if (useXdr && this.crossOrigin) {\n          this._loadXdr();\n        } else {\n          this._loadXhr();\n        }\n\n        break;\n    }\n  }\n  /**\n   * Checks if the flag is set.\n   *\n   * @private\n   * @param {number} flag - The flag to check.\n   * @return {boolean} True if the flag is set.\n   */\n  ;\n\n  _proto._hasFlag = function _hasFlag(flag) {\n    return (this._flags & flag) !== 0;\n  }\n  /**\n   * (Un)Sets the flag.\n   *\n   * @private\n   * @param {number} flag - The flag to (un)set.\n   * @param {boolean} value - Whether to set or (un)set the flag.\n   */\n  ;\n\n  _proto._setFlag = function _setFlag(flag, value) {\n    this._flags = value ? this._flags | flag : this._flags & ~flag;\n  }\n  /**\n   * Clears all the events from the underlying loading source.\n   *\n   * @private\n   */\n  ;\n\n  _proto._clearEvents = function _clearEvents() {\n    clearTimeout(this._elementTimer);\n\n    if (this.data && this.data.removeEventListener) {\n      this.data.removeEventListener('error', this._boundOnError, false);\n      this.data.removeEventListener('load', this._boundComplete, false);\n      this.data.removeEventListener('progress', this._boundOnProgress, false);\n      this.data.removeEventListener('canplaythrough', this._boundComplete, false);\n    }\n\n    if (this.xhr) {\n      if (this.xhr.removeEventListener) {\n        this.xhr.removeEventListener('error', this._boundXhrOnError, false);\n        this.xhr.removeEventListener('timeout', this._boundXhrOnTimeout, false);\n        this.xhr.removeEventListener('abort', this._boundXhrOnAbort, false);\n        this.xhr.removeEventListener('progress', this._boundOnProgress, false);\n        this.xhr.removeEventListener('load', this._boundXhrOnLoad, false);\n      } else {\n        this.xhr.onerror = null;\n        this.xhr.ontimeout = null;\n        this.xhr.onprogress = null;\n        this.xhr.onload = null;\n      }\n    }\n  }\n  /**\n   * Finalizes the load.\n   *\n   * @private\n   */\n  ;\n\n  _proto._finish = function _finish() {\n    if (this.isComplete) {\n      throw new Error('Complete called again for an already completed resource.');\n    }\n\n    this._setFlag(Resource.STATUS_FLAGS.COMPLETE, true);\n\n    this._setFlag(Resource.STATUS_FLAGS.LOADING, false);\n\n    this.onComplete.dispatch(this);\n  }\n  /**\n   * Loads this resources using an element that has a single source,\n   * like an HTMLImageElement.\n   *\n   * @private\n   * @param {string} type - The type of element to use.\n   */\n  ;\n\n  _proto._loadElement = function _loadElement(type) {\n    if (this.metadata.loadElement) {\n      this.data = this.metadata.loadElement;\n    } else if (type === 'image' && typeof window.Image !== 'undefined') {\n      this.data = new Image();\n    } else {\n      this.data = document.createElement(type);\n    }\n\n    if (this.crossOrigin) {\n      this.data.crossOrigin = this.crossOrigin;\n    }\n\n    if (!this.metadata.skipSource) {\n      this.data.src = this.url;\n    }\n\n    this.data.addEventListener('error', this._boundOnError, false);\n    this.data.addEventListener('load', this._boundComplete, false);\n    this.data.addEventListener('progress', this._boundOnProgress, false);\n\n    if (this.timeout) {\n      this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout);\n    }\n  }\n  /**\n   * Loads this resources using an element that has multiple sources,\n   * like an HTMLAudioElement or HTMLVideoElement.\n   *\n   * @private\n   * @param {string} type - The type of element to use.\n   */\n  ;\n\n  _proto._loadSourceElement = function _loadSourceElement(type) {\n    if (this.metadata.loadElement) {\n      this.data = this.metadata.loadElement;\n    } else if (type === 'audio' && typeof window.Audio !== 'undefined') {\n      this.data = new Audio();\n    } else {\n      this.data = document.createElement(type);\n    }\n\n    if (this.data === null) {\n      this.abort(\"Unsupported element: \" + type);\n      return;\n    }\n\n    if (this.crossOrigin) {\n      this.data.crossOrigin = this.crossOrigin;\n    }\n\n    if (!this.metadata.skipSource) {\n      // support for CocoonJS Canvas+ runtime, lacks document.createElement('source')\n      if (navigator.isCocoonJS) {\n        this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;\n      } else if (Array.isArray(this.url)) {\n        var mimeTypes = this.metadata.mimeType;\n\n        for (var i = 0; i < this.url.length; ++i) {\n          this.data.appendChild(this._createSource(type, this.url[i], Array.isArray(mimeTypes) ? mimeTypes[i] : mimeTypes));\n        }\n      } else {\n        var _mimeTypes = this.metadata.mimeType;\n        this.data.appendChild(this._createSource(type, this.url, Array.isArray(_mimeTypes) ? _mimeTypes[0] : _mimeTypes));\n      }\n    }\n\n    this.data.addEventListener('error', this._boundOnError, false);\n    this.data.addEventListener('load', this._boundComplete, false);\n    this.data.addEventListener('progress', this._boundOnProgress, false);\n    this.data.addEventListener('canplaythrough', this._boundComplete, false);\n    this.data.load();\n\n    if (this.timeout) {\n      this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout);\n    }\n  }\n  /**\n   * Loads this resources using an XMLHttpRequest.\n   *\n   * @private\n   */\n  ;\n\n  _proto._loadXhr = function _loadXhr() {\n    // if unset, determine the value\n    if (typeof this.xhrType !== 'string') {\n      this.xhrType = this._determineXhrType();\n    }\n\n    var xhr = this.xhr = new XMLHttpRequest(); // set the request type and url\n\n    xhr.open('GET', this.url, true);\n    xhr.timeout = this.timeout; // load json as text and parse it ourselves. We do this because some browsers\n    // *cough* safari *cough* can't deal with it.\n\n    if (this.xhrType === Resource.XHR_RESPONSE_TYPE.JSON || this.xhrType === Resource.XHR_RESPONSE_TYPE.DOCUMENT) {\n      xhr.responseType = Resource.XHR_RESPONSE_TYPE.TEXT;\n    } else {\n      xhr.responseType = this.xhrType;\n    }\n\n    xhr.addEventListener('error', this._boundXhrOnError, false);\n    xhr.addEventListener('timeout', this._boundXhrOnTimeout, false);\n    xhr.addEventListener('abort', this._boundXhrOnAbort, false);\n    xhr.addEventListener('progress', this._boundOnProgress, false);\n    xhr.addEventListener('load', this._boundXhrOnLoad, false);\n    xhr.send();\n  }\n  /**\n   * Loads this resources using an XDomainRequest. This is here because we need to support IE9 (gross).\n   *\n   * @private\n   */\n  ;\n\n  _proto._loadXdr = function _loadXdr() {\n    // if unset, determine the value\n    if (typeof this.xhrType !== 'string') {\n      this.xhrType = this._determineXhrType();\n    }\n\n    var xdr = this.xhr = new XDomainRequest(); // eslint-disable-line no-undef\n    // XDomainRequest has a few quirks. Occasionally it will abort requests\n    // A way to avoid this is to make sure ALL callbacks are set even if not used\n    // More info here: http://stackoverflow.com/questions/15786966/xdomainrequest-aborts-post-on-ie-9\n\n    xdr.timeout = this.timeout || 5000; // XDR needs a timeout value or it breaks in IE9\n\n    xdr.onerror = this._boundXhrOnError;\n    xdr.ontimeout = this._boundXhrOnTimeout;\n    xdr.onprogress = this._boundOnProgress;\n    xdr.onload = this._boundXhrOnLoad;\n    xdr.open('GET', this.url, true); // Note: The xdr.send() call is wrapped in a timeout to prevent an\n    // issue with the interface where some requests are lost if multiple\n    // XDomainRequests are being sent at the same time.\n    // Some info here: https://github.com/photonstorm/phaser/issues/1248\n\n    setTimeout(function () {\n      return xdr.send();\n    }, 1);\n  }\n  /**\n   * Creates a source used in loading via an element.\n   *\n   * @private\n   * @param {string} type - The element type (video or audio).\n   * @param {string} url - The source URL to load from.\n   * @param {string} [mime] - The mime type of the video\n   * @return {HTMLSourceElement} The source element.\n   */\n  ;\n\n  _proto._createSource = function _createSource(type, url, mime) {\n    if (!mime) {\n      mime = type + \"/\" + this._getExtension(url);\n    }\n\n    var source = document.createElement('source');\n    source.src = url;\n    source.type = mime;\n    return source;\n  }\n  /**\n   * Called if a load errors out.\n   *\n   * @param {Event} event - The error event from the element that emits it.\n   * @private\n   */\n  ;\n\n  _proto._onError = function _onError(event) {\n    this.abort(\"Failed to load element using: \" + event.target.nodeName);\n  }\n  /**\n   * Called if a load progress event fires for an element or xhr/xdr.\n   *\n   * @private\n   * @param {XMLHttpRequestProgressEvent|Event} event - Progress event.\n   */\n  ;\n\n  _proto._onProgress = function _onProgress(event) {\n    if (event && event.lengthComputable) {\n      this.onProgress.dispatch(this, event.loaded / event.total);\n    }\n  }\n  /**\n   * Called if a timeout event fires for an element.\n   *\n   * @private\n   */\n  ;\n\n  _proto._onTimeout = function _onTimeout() {\n    this.abort(\"Load timed out.\");\n  }\n  /**\n   * Called if an error event fires for xhr/xdr.\n   *\n   * @private\n   */\n  ;\n\n  _proto._xhrOnError = function _xhrOnError() {\n    var xhr = this.xhr;\n    this.abort(reqType(xhr) + \" Request failed. Status: \" + xhr.status + \", text: \\\"\" + xhr.statusText + \"\\\"\");\n  }\n  /**\n   * Called if an error event fires for xhr/xdr.\n   *\n   * @private\n   */\n  ;\n\n  _proto._xhrOnTimeout = function _xhrOnTimeout() {\n    var xhr = this.xhr;\n    this.abort(reqType(xhr) + \" Request timed out.\");\n  }\n  /**\n   * Called if an abort event fires for xhr/xdr.\n   *\n   * @private\n   */\n  ;\n\n  _proto._xhrOnAbort = function _xhrOnAbort() {\n    var xhr = this.xhr;\n    this.abort(reqType(xhr) + \" Request was aborted by the user.\");\n  }\n  /**\n   * Called when data successfully loads from an xhr/xdr request.\n   *\n   * @private\n   * @param {XMLHttpRequestLoadEvent|Event} event - Load event\n   */\n  ;\n\n  _proto._xhrOnLoad = function _xhrOnLoad() {\n    var xhr = this.xhr;\n    var text = '';\n    var status = typeof xhr.status === 'undefined' ? STATUS_OK : xhr.status; // XDR has no `.status`, assume 200.\n    // responseText is accessible only if responseType is '' or 'text' and on older browsers\n\n    if (xhr.responseType === '' || xhr.responseType === 'text' || typeof xhr.responseType === 'undefined') {\n      text = xhr.responseText;\n    } // status can be 0 when using the `file://` protocol so we also check if a response is set.\n    // If it has a response, we assume 200; otherwise a 0 status code with no contents is an aborted request.\n\n\n    if (status === STATUS_NONE && (text.length > 0 || xhr.responseType === Resource.XHR_RESPONSE_TYPE.BUFFER)) {\n      status = STATUS_OK;\n    } // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n    else if (status === STATUS_IE_BUG_EMPTY) {\n        status = STATUS_EMPTY;\n      }\n\n    var statusType = status / 100 | 0;\n\n    if (statusType === STATUS_TYPE_OK) {\n      // if text, just return it\n      if (this.xhrType === Resource.XHR_RESPONSE_TYPE.TEXT) {\n        this.data = text;\n        this.type = Resource.TYPE.TEXT;\n      } // if json, parse into json object\n      else if (this.xhrType === Resource.XHR_RESPONSE_TYPE.JSON) {\n          try {\n            this.data = JSON.parse(text);\n            this.type = Resource.TYPE.JSON;\n          } catch (e) {\n            this.abort(\"Error trying to parse loaded json: \" + e);\n            return;\n          }\n        } // if xml, parse into an xml document or div element\n        else if (this.xhrType === Resource.XHR_RESPONSE_TYPE.DOCUMENT) {\n            try {\n              if (window.DOMParser) {\n                var domparser = new DOMParser();\n                this.data = domparser.parseFromString(text, 'text/xml');\n              } else {\n                var div = document.createElement('div');\n                div.innerHTML = text;\n                this.data = div;\n              }\n\n              this.type = Resource.TYPE.XML;\n            } catch (e) {\n              this.abort(\"Error trying to parse loaded xml: \" + e);\n              return;\n            }\n          } // other types just return the response\n          else {\n              this.data = xhr.response || text;\n            }\n    } else {\n      this.abort(\"[\" + xhr.status + \"] \" + xhr.statusText + \": \" + xhr.responseURL);\n      return;\n    }\n\n    this.complete();\n  }\n  /**\n   * Sets the `crossOrigin` property for this resource based on if the url\n   * for this resource is cross-origin. If crossOrigin was manually set, this\n   * function does nothing.\n   *\n   * @private\n   * @param {string} url - The url to test.\n   * @param {object} [loc=window.location] - The location object to test against.\n   * @return {string} The crossOrigin value to use (or empty string for none).\n   */\n  ;\n\n  _proto._determineCrossOrigin = function _determineCrossOrigin(url, loc) {\n    // data: and javascript: urls are considered same-origin\n    if (url.indexOf('data:') === 0) {\n      return '';\n    } // A sandboxed iframe without the 'allow-same-origin' attribute will have a special\n    // origin designed not to match window.location.origin, and will always require\n    // crossOrigin requests regardless of whether the location matches.\n\n\n    if (window.origin !== window.location.origin) {\n      return 'anonymous';\n    } // default is window.location\n\n\n    loc = loc || window.location;\n\n    if (!tempAnchor) {\n      tempAnchor = document.createElement('a');\n    } // let the browser determine the full href for the url of this resource and then\n    // parse with the node url lib, we can't use the properties of the anchor element\n    // because they don't work in IE9 :(\n\n\n    tempAnchor.href = url;\n    url = parseUri(tempAnchor.href, {\n      strictMode: true\n    });\n    var samePort = !url.port && loc.port === '' || url.port === loc.port;\n    var protocol = url.protocol ? url.protocol + \":\" : ''; // if cross origin\n\n    if (url.host !== loc.hostname || !samePort || protocol !== loc.protocol) {\n      return 'anonymous';\n    }\n\n    return '';\n  }\n  /**\n   * Determines the responseType of an XHR request based on the extension of the\n   * resource being loaded.\n   *\n   * @private\n   * @return {Resource.XHR_RESPONSE_TYPE} The responseType to use.\n   */\n  ;\n\n  _proto._determineXhrType = function _determineXhrType() {\n    return Resource._xhrTypeMap[this.extension] || Resource.XHR_RESPONSE_TYPE.TEXT;\n  }\n  /**\n   * Determines the loadType of a resource based on the extension of the\n   * resource being loaded.\n   *\n   * @private\n   * @return {Resource.LOAD_TYPE} The loadType to use.\n   */\n  ;\n\n  _proto._determineLoadType = function _determineLoadType() {\n    return Resource._loadTypeMap[this.extension] || Resource.LOAD_TYPE.XHR;\n  }\n  /**\n   * Extracts the extension (sans '.') of the file being loaded by the resource.\n   *\n   * @private\n   * @return {string} The extension.\n   */\n  ;\n\n  _proto._getExtension = function _getExtension() {\n    var url = this.url;\n    var ext = '';\n\n    if (this.isDataUrl) {\n      var slashIndex = url.indexOf('/');\n      ext = url.substring(slashIndex + 1, url.indexOf(';', slashIndex));\n    } else {\n      var queryStart = url.indexOf('?');\n      var hashStart = url.indexOf('#');\n      var index = Math.min(queryStart > -1 ? queryStart : url.length, hashStart > -1 ? hashStart : url.length);\n      url = url.substring(0, index);\n      ext = url.substring(url.lastIndexOf('.') + 1);\n    }\n\n    return ext.toLowerCase();\n  }\n  /**\n   * Determines the mime type of an XHR request based on the responseType of\n   * resource being loaded.\n   *\n   * @private\n   * @param {Resource.XHR_RESPONSE_TYPE} type - The type to get a mime type for.\n   * @return {string} The mime type to use.\n   */\n  ;\n\n  _proto._getMimeFromXhrType = function _getMimeFromXhrType(type) {\n    switch (type) {\n      case Resource.XHR_RESPONSE_TYPE.BUFFER:\n        return 'application/octet-binary';\n\n      case Resource.XHR_RESPONSE_TYPE.BLOB:\n        return 'application/blob';\n\n      case Resource.XHR_RESPONSE_TYPE.DOCUMENT:\n        return 'application/xml';\n\n      case Resource.XHR_RESPONSE_TYPE.JSON:\n        return 'application/json';\n\n      case Resource.XHR_RESPONSE_TYPE.DEFAULT:\n      case Resource.XHR_RESPONSE_TYPE.TEXT:\n      /* falls through */\n\n      default:\n        return 'text/plain';\n    }\n  };\n\n  _createClass(Resource, [{\n    key: \"isDataUrl\",\n    get: function get() {\n      return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL);\n    }\n    /**\n     * Describes if this resource has finished loading. Is true when the resource has completely\n     * loaded.\n     *\n     * @readonly\n     * @member {boolean}\n     */\n\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE);\n    }\n    /**\n     * Describes if this resource is currently loading. Is true when the resource starts loading,\n     * and is false again when complete.\n     *\n     * @readonly\n     * @member {boolean}\n     */\n\n  }, {\n    key: \"isLoading\",\n    get: function get() {\n      return this._hasFlag(Resource.STATUS_FLAGS.LOADING);\n    }\n  }]);\n\n  return Resource;\n}();\n/**\n * The types of resources a resource could represent.\n *\n * @static\n * @readonly\n * @enum {number}\n */\n\n\nResource.STATUS_FLAGS = {\n  NONE: 0,\n  DATA_URL: 1 << 0,\n  COMPLETE: 1 << 1,\n  LOADING: 1 << 2\n};\n/**\n * The types of resources a resource could represent.\n *\n * @static\n * @readonly\n * @enum {number}\n */\n\nResource.TYPE = {\n  UNKNOWN: 0,\n  JSON: 1,\n  XML: 2,\n  IMAGE: 3,\n  AUDIO: 4,\n  VIDEO: 5,\n  TEXT: 6\n};\n/**\n * The types of loading a resource can use.\n *\n * @static\n * @readonly\n * @enum {number}\n */\n\nResource.LOAD_TYPE = {\n  /** Uses XMLHttpRequest to load the resource. */\n  XHR: 1,\n\n  /** Uses an `Image` object to load the resource. */\n  IMAGE: 2,\n\n  /** Uses an `Audio` object to load the resource. */\n  AUDIO: 3,\n\n  /** Uses a `Video` object to load the resource. */\n  VIDEO: 4\n};\n/**\n * The XHR ready states, used internally.\n *\n * @static\n * @readonly\n * @enum {string}\n */\n\nResource.XHR_RESPONSE_TYPE = {\n  /** string */\n  DEFAULT: 'text',\n\n  /** ArrayBuffer */\n  BUFFER: 'arraybuffer',\n\n  /** Blob */\n  BLOB: 'blob',\n\n  /** Document */\n  DOCUMENT: 'document',\n\n  /** Object */\n  JSON: 'json',\n\n  /** String */\n  TEXT: 'text'\n};\nResource._loadTypeMap = {\n  // images\n  gif: Resource.LOAD_TYPE.IMAGE,\n  png: Resource.LOAD_TYPE.IMAGE,\n  bmp: Resource.LOAD_TYPE.IMAGE,\n  jpg: Resource.LOAD_TYPE.IMAGE,\n  jpeg: Resource.LOAD_TYPE.IMAGE,\n  tif: Resource.LOAD_TYPE.IMAGE,\n  tiff: Resource.LOAD_TYPE.IMAGE,\n  webp: Resource.LOAD_TYPE.IMAGE,\n  tga: Resource.LOAD_TYPE.IMAGE,\n  svg: Resource.LOAD_TYPE.IMAGE,\n  'svg+xml': Resource.LOAD_TYPE.IMAGE,\n  // for SVG data urls\n  // audio\n  mp3: Resource.LOAD_TYPE.AUDIO,\n  ogg: Resource.LOAD_TYPE.AUDIO,\n  wav: Resource.LOAD_TYPE.AUDIO,\n  // videos\n  mp4: Resource.LOAD_TYPE.VIDEO,\n  webm: Resource.LOAD_TYPE.VIDEO\n};\nResource._xhrTypeMap = {\n  // xml\n  xhtml: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n  html: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n  htm: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n  xml: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n  tmx: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n  svg: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n  // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.\n  // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,\n  // this should probably be fine.\n  tsx: Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n  // images\n  gif: Resource.XHR_RESPONSE_TYPE.BLOB,\n  png: Resource.XHR_RESPONSE_TYPE.BLOB,\n  bmp: Resource.XHR_RESPONSE_TYPE.BLOB,\n  jpg: Resource.XHR_RESPONSE_TYPE.BLOB,\n  jpeg: Resource.XHR_RESPONSE_TYPE.BLOB,\n  tif: Resource.XHR_RESPONSE_TYPE.BLOB,\n  tiff: Resource.XHR_RESPONSE_TYPE.BLOB,\n  webp: Resource.XHR_RESPONSE_TYPE.BLOB,\n  tga: Resource.XHR_RESPONSE_TYPE.BLOB,\n  // json\n  json: Resource.XHR_RESPONSE_TYPE.JSON,\n  // text\n  text: Resource.XHR_RESPONSE_TYPE.TEXT,\n  txt: Resource.XHR_RESPONSE_TYPE.TEXT,\n  // fonts\n  ttf: Resource.XHR_RESPONSE_TYPE.BUFFER,\n  otf: Resource.XHR_RESPONSE_TYPE.BUFFER\n}; // We can't set the `src` attribute to empty string, so on abort we set it to this 1px transparent gif\n\nResource.EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\n/**\n * Quick helper to set a value on one of the extension maps. Ensures there is no\n * dot at the start of the extension.\n *\n * @ignore\n * @param {object} map - The map to set on.\n * @param {string} extname - The extension (or key) to set.\n * @param {number} val - The value to set.\n */\n\nfunction setExtMap(map, extname, val) {\n  if (extname && extname.indexOf('.') === 0) {\n    extname = extname.substring(1);\n  }\n\n  if (!extname) {\n    return;\n  }\n\n  map[extname] = val;\n}\n/**\n * Quick helper to get string xhr type.\n *\n * @ignore\n * @param {XMLHttpRequest|XDomainRequest} xhr - The request to check.\n * @return {string} The type.\n */\n\n\nfunction reqType(xhr) {\n  return xhr.toString().replace('object ', '');\n}\n\nvar _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n/**\n * Encodes binary into base64.\n *\n * @function encodeBinary\n * @param {string} input The input data to encode.\n * @returns {string} The encoded base64 string\n */\n\nfunction encodeBinary(input) {\n  var output = '';\n  var inx = 0;\n\n  while (inx < input.length) {\n    // Fill byte buffer array\n    var bytebuffer = [0, 0, 0];\n    var encodedCharIndexes = [0, 0, 0, 0];\n\n    for (var jnx = 0; jnx < bytebuffer.length; ++jnx) {\n      if (inx < input.length) {\n        // throw away high-order byte, as documented at:\n        // https://developer.mozilla.org/En/Using_XMLHttpRequest#Handling_binary_data\n        bytebuffer[jnx] = input.charCodeAt(inx++) & 0xff;\n      } else {\n        bytebuffer[jnx] = 0;\n      }\n    } // Get each encoded character, 6 bits at a time\n    // index 1: first 6 bits\n\n\n    encodedCharIndexes[0] = bytebuffer[0] >> 2; // index 2: second 6 bits (2 least significant bits from input byte 1 + 4 most significant bits from byte 2)\n\n    encodedCharIndexes[1] = (bytebuffer[0] & 0x3) << 4 | bytebuffer[1] >> 4; // index 3: third 6 bits (4 least significant bits from input byte 2 + 2 most significant bits from byte 3)\n\n    encodedCharIndexes[2] = (bytebuffer[1] & 0x0f) << 2 | bytebuffer[2] >> 6; // index 3: forth 6 bits (6 least significant bits from input byte 3)\n\n    encodedCharIndexes[3] = bytebuffer[2] & 0x3f; // Determine whether padding happened, and adjust accordingly\n\n    var paddingBytes = inx - (input.length - 1);\n\n    switch (paddingBytes) {\n      case 2:\n        // Set last 2 characters to padding char\n        encodedCharIndexes[3] = 64;\n        encodedCharIndexes[2] = 64;\n        break;\n\n      case 1:\n        // Set last character to padding char\n        encodedCharIndexes[3] = 64;\n        break;\n\n      default:\n        break;\n      // No padding - proceed\n    } // Now we will grab each appropriate character out of our keystring\n    // based on our index array and append it to the output string\n\n\n    for (var _jnx = 0; _jnx < encodedCharIndexes.length; ++_jnx) {\n      output += _keyStr.charAt(encodedCharIndexes[_jnx]);\n    }\n  }\n\n  return output;\n}\n\nvar Url = window.URL || window.webkitURL;\n/**\n * A middleware for transforming XHR loaded Blobs into more useful objects\n *\n * @memberof middleware\n * @function parsing\n * @example\n * import { Loader, middleware } from 'resource-loader';\n * const loader = new Loader();\n * loader.use(middleware.parsing);\n * @param {Resource} resource - Current Resource\n * @param {function} next - Callback when complete\n */\n\nfunction parsing(resource, next) {\n  if (!resource.data) {\n    next();\n    return;\n  } // if this was an XHR load of a blob\n\n\n  if (resource.xhr && resource.xhrType === Resource.XHR_RESPONSE_TYPE.BLOB) {\n    // if there is no blob support we probably got a binary string back\n    if (!window.Blob || typeof resource.data === 'string') {\n      var type = resource.xhr.getResponseHeader('content-type'); // this is an image, convert the binary string into a data url\n\n      if (type && type.indexOf('image') === 0) {\n        resource.data = new Image();\n        resource.data.src = \"data:\" + type + \";base64,\" + encodeBinary(resource.xhr.responseText);\n        resource.type = Resource.TYPE.IMAGE; // wait until the image loads and then callback\n\n        resource.data.onload = function () {\n          resource.data.onload = null;\n          next();\n        }; // next will be called on load\n\n\n        return;\n      }\n    } // if content type says this is an image, then we should transform the blob into an Image object\n    else if (resource.data.type.indexOf('image') === 0) {\n        var src = Url.createObjectURL(resource.data);\n        resource.blob = resource.data;\n        resource.data = new Image();\n        resource.data.src = src;\n        resource.type = Resource.TYPE.IMAGE; // cleanup the no longer used blob after the image loads\n        // TODO: Is this correct? Will the image be invalid after revoking?\n\n        resource.data.onload = function () {\n          Url.revokeObjectURL(src);\n          resource.data.onload = null;\n          next();\n        }; // next will be called on load.\n\n\n        return;\n      }\n  }\n\n  next();\n}\n\n/**\n * @namespace middleware\n */\n\nvar index = ({\n    caching: caching,\n    parsing: parsing\n});\n\nvar MAX_PROGRESS = 100;\nvar rgxExtractUrlHash = /(#[\\w-]+)?$/;\n/**\n * Manages the state and loading of multiple resources to load.\n *\n * @class\n */\n\nvar Loader =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param {string} [baseUrl=''] - The base url for all resources loaded by this loader.\n   * @param {number} [concurrency=10] - The number of resources to load concurrently.\n   */\n  function Loader(baseUrl, concurrency) {\n    var _this = this;\n\n    if (baseUrl === void 0) {\n      baseUrl = '';\n    }\n\n    if (concurrency === void 0) {\n      concurrency = 10;\n    }\n\n    /**\n     * The base url for all resources loaded by this loader.\n     *\n     * @member {string}\n     */\n    this.baseUrl = baseUrl;\n    /**\n     * The progress percent of the loader going through the queue.\n     *\n     * @member {number}\n     * @default 0\n     */\n\n    this.progress = 0;\n    /**\n     * Loading state of the loader, true if it is currently loading resources.\n     *\n     * @member {boolean}\n     * @default false\n     */\n\n    this.loading = false;\n    /**\n     * A querystring to append to every URL added to the loader.\n     *\n     * This should be a valid query string *without* the question-mark (`?`). The loader will\n     * also *not* escape values for you. Make sure to escape your parameters with\n     * [`encodeURIComponent`](https://mdn.io/encodeURIComponent) before assigning this property.\n     *\n     * @example\n     * const loader = new Loader();\n     *\n     * loader.defaultQueryString = 'user=me&password=secret';\n     *\n     * // This will request 'image.png?user=me&password=secret'\n     * loader.add('image.png').load();\n     *\n     * loader.reset();\n     *\n     * // This will request 'image.png?v=1&user=me&password=secret'\n     * loader.add('iamge.png?v=1').load();\n     *\n     * @member {string}\n     * @default ''\n     */\n\n    this.defaultQueryString = '';\n    /**\n     * The middleware to run before loading each resource.\n     *\n     * @private\n     * @member {function[]}\n     */\n\n    this._beforeMiddleware = [];\n    /**\n     * The middleware to run after loading each resource.\n     *\n     * @private\n     * @member {function[]}\n     */\n\n    this._afterMiddleware = [];\n    /**\n     * The tracks the resources we are currently completing parsing for.\n     *\n     * @private\n     * @member {Resource[]}\n     */\n\n    this._resourcesParsing = [];\n    /**\n     * The `_loadResource` function bound with this object context.\n     *\n     * @private\n     * @member {function}\n     * @param {Resource} r - The resource to load\n     * @param {Function} d - The dequeue function\n     * @return {undefined}\n     */\n\n    this._boundLoadResource = function (r, d) {\n      return _this._loadResource(r, d);\n    };\n    /**\n     * The resources waiting to be loaded.\n     *\n     * @private\n     * @member {Resource[]}\n     */\n\n\n    this._queue = queue(this._boundLoadResource, concurrency);\n\n    this._queue.pause();\n    /**\n     * All the resources for this loader keyed by name.\n     *\n     * @member {object<string, Resource>}\n     */\n\n\n    this.resources = {};\n    /**\n     * Dispatched once per loaded or errored resource.\n     *\n     * The callback looks like {@link Loader.OnProgressSignal}.\n     *\n     * @member {Signal<Loader.OnProgressSignal>}\n     */\n\n    this.onProgress = new Signal();\n    /**\n     * Dispatched once per errored resource.\n     *\n     * The callback looks like {@link Loader.OnErrorSignal}.\n     *\n     * @member {Signal<Loader.OnErrorSignal>}\n     */\n\n    this.onError = new Signal();\n    /**\n     * Dispatched once per loaded resource.\n     *\n     * The callback looks like {@link Loader.OnLoadSignal}.\n     *\n     * @member {Signal<Loader.OnLoadSignal>}\n     */\n\n    this.onLoad = new Signal();\n    /**\n     * Dispatched when the loader begins to process the queue.\n     *\n     * The callback looks like {@link Loader.OnStartSignal}.\n     *\n     * @member {Signal<Loader.OnStartSignal>}\n     */\n\n    this.onStart = new Signal();\n    /**\n     * Dispatched when the queued resources all load.\n     *\n     * The callback looks like {@link Loader.OnCompleteSignal}.\n     *\n     * @member {Signal<Loader.OnCompleteSignal>}\n     */\n\n    this.onComplete = new Signal(); // Add default before middleware\n\n    for (var i = 0; i < Loader._defaultBeforeMiddleware.length; ++i) {\n      this.pre(Loader._defaultBeforeMiddleware[i]);\n    } // Add default after middleware\n\n\n    for (var _i = 0; _i < Loader._defaultAfterMiddleware.length; ++_i) {\n      this.use(Loader._defaultAfterMiddleware[_i]);\n    }\n  }\n  /**\n   * When the progress changes the loader and resource are disaptched.\n   *\n   * @memberof Loader\n   * @callback OnProgressSignal\n   * @param {Loader} loader - The loader the progress is advancing on.\n   * @param {Resource} resource - The resource that has completed or failed to cause the progress to advance.\n   */\n\n  /**\n   * When an error occurrs the loader and resource are disaptched.\n   *\n   * @memberof Loader\n   * @callback OnErrorSignal\n   * @param {Loader} loader - The loader the error happened in.\n   * @param {Resource} resource - The resource that caused the error.\n   */\n\n  /**\n   * When a load completes the loader and resource are disaptched.\n   *\n   * @memberof Loader\n   * @callback OnLoadSignal\n   * @param {Loader} loader - The loader that laoded the resource.\n   * @param {Resource} resource - The resource that has completed loading.\n   */\n\n  /**\n   * When the loader starts loading resources it dispatches this callback.\n   *\n   * @memberof Loader\n   * @callback OnStartSignal\n   * @param {Loader} loader - The loader that has started loading resources.\n   */\n\n  /**\n   * When the loader completes loading resources it dispatches this callback.\n   *\n   * @memberof Loader\n   * @callback OnCompleteSignal\n   * @param {Loader} loader - The loader that has finished loading resources.\n   */\n\n  /**\n   * Options for a call to `.add()`.\n   *\n   * @see Loader#add\n   *\n   * @typedef {object} IAddOptions\n   * @property {string} [name] - The name of the resource to load, if not passed the url is used.\n   * @property {string} [key] - Alias for `name`.\n   * @property {string} [url] - The url for this resource, relative to the baseUrl of this loader.\n   * @property {string|boolean} [crossOrigin] - Is this request cross-origin? Default is to\n   *      determine automatically.\n   * @property {number} [timeout=0] - A timeout in milliseconds for the load. If the load takes\n   *      longer than this time it is cancelled and the load is considered a failure. If this value is\n   *      set to `0` then there is no explicit timeout.\n   * @property {Resource.LOAD_TYPE} [loadType=Resource.LOAD_TYPE.XHR] - How should this resource\n   *      be loaded?\n   * @property {Resource.XHR_RESPONSE_TYPE} [xhrType=Resource.XHR_RESPONSE_TYPE.DEFAULT] - How\n   *      should the data being loaded be interpreted when using XHR?\n   * @property {Resource.OnCompleteSignal} [onComplete] - Callback to add an an onComplete signal istener.\n   * @property {Resource.OnCompleteSignal} [callback] - Alias for `onComplete`.\n   * @property {Resource.IMetadata} [metadata] - Extra configuration for middleware and the Resource object.\n   */\n\n  /* eslint-disable require-jsdoc,valid-jsdoc */\n\n  /**\n   * Adds a resource (or multiple resources) to the loader queue.\n   *\n   * This function can take a wide variety of different parameters. The only thing that is always\n   * required the url to load. All the following will work:\n   *\n   * ```js\n   * loader\n   *     // normal param syntax\n   *     .add('key', 'http://...', function () {})\n   *     .add('http://...', function () {})\n   *     .add('http://...')\n   *\n   *     // object syntax\n   *     .add({\n   *         name: 'key2',\n   *         url: 'http://...'\n   *     }, function () {})\n   *     .add({\n   *         url: 'http://...'\n   *     }, function () {})\n   *     .add({\n   *         name: 'key3',\n   *         url: 'http://...'\n   *         onComplete: function () {}\n   *     })\n   *     .add({\n   *         url: 'https://...',\n   *         onComplete: function () {},\n   *         crossOrigin: true\n   *     })\n   *\n   *     // you can also pass an array of objects or urls or both\n   *     .add([\n   *         { name: 'key4', url: 'http://...', onComplete: function () {} },\n   *         { url: 'http://...', onComplete: function () {} },\n   *         'http://...'\n   *     ])\n   *\n   *     // and you can use both params and options\n   *     .add('key', 'http://...', { crossOrigin: true }, function () {})\n   *     .add('http://...', { crossOrigin: true }, function () {});\n   * ```\n   *\n   * @function\n   * @variation 1\n   * @param {string} name - The name of the resource to load.\n   * @param {string} url - The url for this resource, relative to the baseUrl of this loader.\n   * @param {Resource.OnCompleteSignal} [callback] - Function to call when this specific resource completes loading.\n   * @return {this} Returns itself.\n   */\n\n  /**\n  * @function\n  * @variation 2\n  * @param {string} name - The name of the resource to load.\n  * @param {string} url - The url for this resource, relative to the baseUrl of this loader.\n  * @param {IAddOptions} [options] - The options for the load.\n  * @param {Resource.OnCompleteSignal} [callback] - Function to call when this specific resource completes loading.\n  * @return {this} Returns itself.\n  */\n\n  /**\n  * @function\n  * @variation 3\n  * @param {string} url - The url for this resource, relative to the baseUrl of this loader.\n  * @param {Resource.OnCompleteSignal} [callback] - Function to call when this specific resource completes loading.\n  * @return {this} Returns itself.\n  */\n\n  /**\n  * @function\n  * @variation 4\n  * @param {string} url - The url for this resource, relative to the baseUrl of this loader.\n  * @param {IAddOptions} [options] - The options for the load.\n  * @param {Resource.OnCompleteSignal} [callback] - Function to call when this specific resource completes loading.\n  * @return {this} Returns itself.\n  */\n\n  /**\n  * @function\n  * @variation 5\n  * @param {IAddOptions} options - The options for the load. This object must contain a `url` property.\n  * @param {Resource.OnCompleteSignal} [callback] - Function to call when this specific resource completes loading.\n  * @return {this} Returns itself.\n  */\n\n  /**\n  * @function\n  * @variation 6\n  * @param {Array<IAddOptions|string>} resources - An array of resources to load, where each is\n  *      either an object with the options or a string url. If you pass an object, it must contain a `url` property.\n  * @param {Resource.OnCompleteSignal} [callback] - Function to call when this specific resource completes loading.\n  * @return {this} Returns itself.\n  */\n\n\n  var _proto = Loader.prototype;\n\n  _proto.add = function add(name, url, options, cb) {\n    // special case of an array of objects or urls\n    if (Array.isArray(name)) {\n      for (var i = 0; i < name.length; ++i) {\n        this.add(name[i]);\n      }\n\n      return this;\n    } // if an object is passed instead of params\n\n\n    if (typeof name === 'object') {\n      cb = url || name.callback || name.onComplete;\n      options = name;\n      url = name.url;\n      name = name.name || name.key || name.url;\n    } // case where no name is passed shift all args over by one.\n\n\n    if (typeof url !== 'string') {\n      cb = options;\n      options = url;\n      url = name;\n    } // now that we shifted make sure we have a proper url.\n\n\n    if (typeof url !== 'string') {\n      throw new Error('No url passed to add resource to loader.');\n    } // options are optional so people might pass a function and no options\n\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = null;\n    } // if loading already you can only add resources that have a parent.\n\n\n    if (this.loading && (!options || !options.parentResource)) {\n      throw new Error('Cannot add resources while the loader is running.');\n    } // check if resource already exists.\n\n\n    if (this.resources[name]) {\n      throw new Error(\"Resource named \\\"\" + name + \"\\\" already exists.\");\n    } // add base url if this isn't an absolute url\n\n\n    url = this._prepareUrl(url); // create the store the resource\n\n    this.resources[name] = new Resource(name, url, options);\n\n    if (typeof cb === 'function') {\n      this.resources[name].onAfterMiddleware.once(cb);\n    } // if actively loading, make sure to adjust progress chunks for that parent and its children\n\n\n    if (this.loading) {\n      var parent = options.parentResource;\n      var incompleteChildren = [];\n\n      for (var _i2 = 0; _i2 < parent.children.length; ++_i2) {\n        if (!parent.children[_i2].isComplete) {\n          incompleteChildren.push(parent.children[_i2]);\n        }\n      }\n\n      var fullChunk = parent.progressChunk * (incompleteChildren.length + 1); // +1 for parent\n\n      var eachChunk = fullChunk / (incompleteChildren.length + 2); // +2 for parent & new child\n\n      parent.children.push(this.resources[name]);\n      parent.progressChunk = eachChunk;\n\n      for (var _i3 = 0; _i3 < incompleteChildren.length; ++_i3) {\n        incompleteChildren[_i3].progressChunk = eachChunk;\n      }\n\n      this.resources[name].progressChunk = eachChunk;\n    } // add the resource to the queue\n\n\n    this._queue.push(this.resources[name]);\n\n    return this;\n  }\n  /* eslint-enable require-jsdoc,valid-jsdoc */\n\n  /**\n   * Sets up a middleware function that will run *before* the\n   * resource is loaded.\n   *\n   * @param {function} fn - The middleware function to register.\n   * @return {this} Returns itself.\n   */\n  ;\n\n  _proto.pre = function pre(fn) {\n    this._beforeMiddleware.push(fn);\n\n    return this;\n  }\n  /**\n   * Sets up a middleware function that will run *after* the\n   * resource is loaded.\n   *\n   * @param {function} fn - The middleware function to register.\n   * @return {this} Returns itself.\n   */\n  ;\n\n  _proto.use = function use(fn) {\n    this._afterMiddleware.push(fn);\n\n    return this;\n  }\n  /**\n   * Resets the queue of the loader to prepare for a new load.\n   *\n   * @return {this} Returns itself.\n   */\n  ;\n\n  _proto.reset = function reset() {\n    this.progress = 0;\n    this.loading = false;\n\n    this._queue.kill();\n\n    this._queue.pause(); // abort all resource loads\n\n\n    for (var k in this.resources) {\n      var res = this.resources[k];\n\n      if (res._onLoadBinding) {\n        res._onLoadBinding.detach();\n      }\n\n      if (res.isLoading) {\n        res.abort();\n      }\n    }\n\n    this.resources = {};\n    return this;\n  }\n  /**\n   * Starts loading the queued resources.\n   *\n   * @param {function} [cb] - Optional callback that will be bound to the `complete` event.\n   * @return {this} Returns itself.\n   */\n  ;\n\n  _proto.load = function load(cb) {\n    // register complete callback if they pass one\n    if (typeof cb === 'function') {\n      this.onComplete.once(cb);\n    } // if the queue has already started we are done here\n\n\n    if (this.loading) {\n      return this;\n    }\n\n    if (this._queue.idle()) {\n      this._onStart();\n\n      this._onComplete();\n    } else {\n      // distribute progress chunks\n      var numTasks = this._queue._tasks.length;\n      var chunk = MAX_PROGRESS / numTasks;\n\n      for (var i = 0; i < this._queue._tasks.length; ++i) {\n        this._queue._tasks[i].data.progressChunk = chunk;\n      } // notify we are starting\n\n\n      this._onStart(); // start loading\n\n\n      this._queue.resume();\n    }\n\n    return this;\n  }\n  /**\n   * The number of resources to load concurrently.\n   *\n   * @member {number}\n   * @default 10\n   */\n  ;\n\n  /**\n   * Prepares a url for usage based on the configuration of this object\n   *\n   * @private\n   * @param {string} url - The url to prepare.\n   * @return {string} The prepared url.\n   */\n  _proto._prepareUrl = function _prepareUrl(url) {\n    var parsedUrl = parseUri(url, {\n      strictMode: true\n    });\n    var result; // absolute url, just use it as is.\n\n    if (parsedUrl.protocol || !parsedUrl.path || url.indexOf('//') === 0) {\n      result = url;\n    } // if baseUrl doesn't end in slash and url doesn't start with slash, then add a slash inbetween\n    else if (this.baseUrl.length && this.baseUrl.lastIndexOf('/') !== this.baseUrl.length - 1 && url.charAt(0) !== '/') {\n        result = this.baseUrl + \"/\" + url;\n      } else {\n        result = this.baseUrl + url;\n      } // if we need to add a default querystring, there is a bit more work\n\n\n    if (this.defaultQueryString) {\n      var hash = rgxExtractUrlHash.exec(result)[0];\n      result = result.substr(0, result.length - hash.length);\n\n      if (result.indexOf('?') !== -1) {\n        result += \"&\" + this.defaultQueryString;\n      } else {\n        result += \"?\" + this.defaultQueryString;\n      }\n\n      result += hash;\n    }\n\n    return result;\n  }\n  /**\n   * Loads a single resource.\n   *\n   * @private\n   * @param {Resource} resource - The resource to load.\n   * @param {function} dequeue - The function to call when we need to dequeue this item.\n   */\n  ;\n\n  _proto._loadResource = function _loadResource(resource, dequeue) {\n    var _this2 = this;\n\n    resource._dequeue = dequeue; // run before middleware\n\n    eachSeries(this._beforeMiddleware, function (fn, next) {\n      fn.call(_this2, resource, function () {\n        // if the before middleware marks the resource as complete,\n        // break and don't process any more before middleware\n        next(resource.isComplete ? {} : null);\n      });\n    }, function () {\n      if (resource.isComplete) {\n        _this2._onLoad(resource);\n      } else {\n        resource._onLoadBinding = resource.onComplete.once(_this2._onLoad, _this2);\n        resource.load();\n      }\n    }, true);\n  }\n  /**\n   * Called once loading has started.\n   *\n   * @private\n   */\n  ;\n\n  _proto._onStart = function _onStart() {\n    this.progress = 0;\n    this.loading = true;\n    this.onStart.dispatch(this);\n  }\n  /**\n   * Called once each resource has loaded.\n   *\n   * @private\n   */\n  ;\n\n  _proto._onComplete = function _onComplete() {\n    this.progress = MAX_PROGRESS;\n    this.loading = false;\n    this.onComplete.dispatch(this, this.resources);\n  }\n  /**\n   * Called each time a resources is loaded.\n   *\n   * @private\n   * @param {Resource} resource - The resource that was loaded\n   */\n  ;\n\n  _proto._onLoad = function _onLoad(resource) {\n    var _this3 = this;\n\n    resource._onLoadBinding = null; // remove this resource from the async queue, and add it to our list of resources that are being parsed\n\n    this._resourcesParsing.push(resource);\n\n    resource._dequeue(); // run all the after middleware for this resource\n\n\n    eachSeries(this._afterMiddleware, function (fn, next) {\n      fn.call(_this3, resource, next);\n    }, function () {\n      resource.onAfterMiddleware.dispatch(resource);\n      _this3.progress = Math.min(MAX_PROGRESS, _this3.progress + resource.progressChunk);\n\n      _this3.onProgress.dispatch(_this3, resource);\n\n      if (resource.error) {\n        _this3.onError.dispatch(resource.error, _this3, resource);\n      } else {\n        _this3.onLoad.dispatch(_this3, resource);\n      }\n\n      _this3._resourcesParsing.splice(_this3._resourcesParsing.indexOf(resource), 1); // do completion check\n\n\n      if (_this3._queue.idle() && _this3._resourcesParsing.length === 0) {\n        _this3._onComplete();\n      }\n    }, true);\n  };\n\n  _createClass(Loader, [{\n    key: \"concurrency\",\n    get: function get() {\n      return this._queue.concurrency;\n    } // eslint-disable-next-line require-jsdoc\n    ,\n    set: function set(concurrency) {\n      this._queue.concurrency = concurrency;\n    }\n  }]);\n\n  return Loader;\n}();\n/**\n * A default array of middleware to run before loading each resource.\n * Each of these middlewares are added to any new Loader instances when they are created.\n *\n * @private\n * @member {function[]}\n */\n\n\nLoader._defaultBeforeMiddleware = [];\n/**\n * A default array of middleware to run after loading each resource.\n * Each of these middlewares are added to any new Loader instances when they are created.\n *\n * @private\n * @member {function[]}\n */\n\nLoader._defaultAfterMiddleware = [];\n/**\n * Sets up a middleware function that will run *before* the\n * resource is loaded.\n *\n * @static\n * @param {function} fn - The middleware function to register.\n * @return {Loader} Returns itself.\n */\n\nLoader.pre = function LoaderPreStatic(fn) {\n  Loader._defaultBeforeMiddleware.push(fn);\n\n  return Loader;\n};\n/**\n * Sets up a middleware function that will run *after* the\n * resource is loaded.\n *\n * @static\n * @param {function} fn - The middleware function to register.\n * @return {Loader} Returns itself.\n */\n\n\nLoader.use = function LoaderUseStatic(fn) {\n  Loader._defaultAfterMiddleware.push(fn);\n\n  return Loader;\n};\n\nexports.Loader = Loader;\nexports.Resource = Resource;\nexports.async = async;\nexports.encodeBinary = encodeBinary;\nexports.middleware = index;\n//# sourceMappingURL=resource-loader.cjs.js.map\n\n};"],
"names":["shadow$provide","global","require","module","exports","_interopDefault","ex","_noop","eachSeries","array","iterator","callback","deferNext","i","len","length","next","err","setTimeout","onlyOnce","fn","onceWrapper","Error","callFn","apply","arguments","queue","worker","concurrency","_insert","data","insertAtFront","q","started","idle","drain","item","_tasks","unshift","push","process","_next","task","workers","error","buffer","unsaturated","saturated","empty","paused","kill","shift","running","pause","resume","w","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_noop$1","setExtMap","map","extname","val","indexOf","substring","reqType","xhr","toString","replace","encodeBinary","input","output","inx","bytebuffer","encodedCharIndexes","jnx","charCodeAt","_jnx","_keyStr","charAt","value","parseUri","Signal","async","cache","useXdr","XDomainRequest","window","XMLHttpRequest","tempAnchor","Resource","name","url","options","_flags","_setFlag","STATUS_FLAGS","DATA_URL","extension","_getExtension","crossOrigin","timeout","loadType","_determineLoadType","xhrType","metadata","children","type","TYPE","UNKNOWN","progressChunk","_dequeue","_onLoadBinding","_elementTimer","_boundComplete","complete","bind","_boundOnError","_onError","_boundOnProgress","_onProgress","_boundOnTimeout","_onTimeout","_boundXhrOnError","_xhrOnError","_boundXhrOnTimeout","_xhrOnTimeout","_boundXhrOnAbort","_xhrOnAbort","_boundXhrOnLoad","_xhrOnLoad","onStart","onProgress","onComplete","onAfterMiddleware","setExtensionLoadType","Resource.setExtensionLoadType","_loadTypeMap","setExtensionXhrType","Resource.setExtensionXhrType","_xhrTypeMap","_proto","_proto.complete","_clearEvents","_finish","abort","_proto.abort","message","xdr","src","EMPTY_GIF","firstChild","removeChild","load","_proto.load","cb","_this","isLoading","isComplete","once","LOADING","dispatch","_determineCrossOrigin","LOAD_TYPE","IMAGE","_loadElement","AUDIO","_loadSourceElement","VIDEO","_loadXdr","_loadXhr","_hasFlag","_proto._hasFlag","flag","_proto._setFlag","_proto._clearEvents","clearTimeout","removeEventListener","onerror","ontimeout","onprogress","onload","_proto._finish","COMPLETE","_proto._loadElement","loadElement","Image","document","createElement","skipSource","addEventListener","_proto._loadSourceElement","Audio","navigator","isCocoonJS","Array","isArray","mimeTypes","mimeType","appendChild","_createSource","_mimeTypes","_proto._loadXhr","_determineXhrType","open","responseType","XHR_RESPONSE_TYPE","JSON","DOCUMENT","TEXT","send","_proto._loadXdr","_proto._createSource","mime","source","_proto._onError","event","nodeName","_proto._onProgress","lengthComputable","loaded","total","_proto._onTimeout","_proto._xhrOnError","status","statusText","_proto._xhrOnTimeout","_proto._xhrOnAbort","_proto._xhrOnLoad","text","STATUS_OK","responseText","STATUS_NONE","BUFFER","STATUS_IE_BUG_EMPTY","STATUS_EMPTY","STATUS_TYPE_OK","parse","e","DOMParser","domparser","parseFromString","div","innerHTML","XML","response","responseURL","_proto._determineCrossOrigin","loc","origin","location","href","strictMode","samePort","port","protocol","host","hostname","_proto._determineXhrType","_proto._determineLoadType","XHR","_proto._getExtension","isDataUrl","slashIndex","ext","queryStart","hashStart","Math","index","min","lastIndexOf","toLowerCase","_getMimeFromXhrType","_proto._getMimeFromXhrType","BLOB","get","NONE","DEFAULT","gif","png","bmp","jpg","jpeg","tif","tiff","webp","tga","svg","mp3","ogg","wav","mp4","webm","xhtml","html","htm","xml","tmx","tsx","json","txt","ttf","otf","Url","URL","webkitURL","rgxExtractUrlHash","Loader","baseUrl","progress","loading","defaultQueryString","_beforeMiddleware","_afterMiddleware","_resourcesParsing","_boundLoadResource","this._boundLoadResource","r","d","_loadResource","_queue","resources","onError","onLoad","_defaultBeforeMiddleware","pre","_i","_defaultAfterMiddleware","use","add","_proto.add","parentResource","_prepareUrl","parent","incompleteChildren","_i2","eachChunk","_i3","_proto.pre","_proto.use","reset","_proto.reset","k","res","detach","_onStart","_onComplete","chunk","MAX_PROGRESS","_proto._prepareUrl","parsedUrl","result","path","hash","exec","substr","_proto._loadResource","resource","dequeue","_this2","call","_onLoad","_proto._onStart","_proto._onComplete","_proto._onLoad","_this3","splice","set","Loader.pre","Loader.use","middleware","caching","parsing","Blob","getResponseHeader","resource.data.onload","createObjectURL","blob","revokeObjectURL"]
}
