shadow$provide.module$node_modules$$pixi$filter_displacement$dist$cjs$filter_displacement=function(global,require,module,exports){function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$$pixi$core$dist$cjs$core");var math=require("module$node_modules$$pixi$math$dist$cjs$math"),extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};require=function(_super){function DisplacementFilter(sprite,scale){var maskMatrix=new math.Matrix;sprite.renderable=!1;var _this=_super.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position \x3d aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position \x3d filterVertexPosition();\n\tvTextureCoord \x3d filterTextureCoord();\n\tvFilterCoord \x3d ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n",
"varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map \x3d  texture2D(mapSampler, vFilterCoord);\n\n  map -\x3d 0.5;\n  map.xy \x3d scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor \x3d texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",
{mapSampler:sprite._texture,filterMatrix:maskMatrix,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this;_this.maskSprite=sprite;_this.maskMatrix=maskMatrix;if(null===scale||void 0===scale)scale=20;_this.scale=new math.Point(scale,scale);return _this}__extends(DisplacementFilter,_super);DisplacementFilter.prototype.apply=function(filterManager,input,output,clearMode){this.uniforms.filterMatrix=filterManager.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x;
this.uniforms.scale.y=this.scale.y;var wt=this.maskSprite.worldTransform,lenX=Math.sqrt(wt.a*wt.a+wt.b*wt.b),lenY=Math.sqrt(wt.c*wt.c+wt.d*wt.d);0!==lenX&&0!==lenY&&(this.uniforms.rotation[0]=wt.a/lenX,this.uniforms.rotation[1]=wt.b/lenX,this.uniforms.rotation[2]=wt.c/lenY,this.uniforms.rotation[3]=wt.d/lenY);filterManager.applyFilter(this,input,output,clearMode)};Object.defineProperty(DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(value){this.uniforms.mapSampler=
value},enumerable:!1,configurable:!0});return DisplacementFilter}(global.Filter);exports.DisplacementFilter=require}
//# sourceMappingURL=module$node_modules$$pixi$filter_displacement$dist$cjs$filter_displacement.js.map
