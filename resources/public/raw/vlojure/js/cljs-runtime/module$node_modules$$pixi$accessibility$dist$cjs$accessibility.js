shadow$provide.module$node_modules$$pixi$accessibility$dist$cjs$accessibility=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$$pixi$display$dist$cjs$display");var utils=require("module$node_modules$$pixi$utils$dist$cjs$utils");require={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,
renderId:-1};global.DisplayObject.mixin(require);global=function(){function AccessibilityManager(renderer){this._isMobileAccessibility=this._isActive=this.debug=!1;this.pool=[];this.renderId=0;this.children=[];this.androidUpdateCount=0;this.androidUpdateFrequency=500;this._hookDiv=null;(utils.isMobile.tablet||utils.isMobile.phone)&&this.createTouchHook();var div=document.createElement("div");div.style.width="100px";div.style.height="100px";div.style.position="absolute";div.style.top="0px";div.style.left=
"0px";div.style.zIndex=(2).toString();this.div=div;this.renderer=renderer;this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);self.addEventListener("keydown",this._onKeyDown,!1)}Object.defineProperty(AccessibilityManager.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0});Object.defineProperty(AccessibilityManager.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0});
AccessibilityManager.prototype.createTouchHook=function(){var _this=this,hookDiv=document.createElement("button");hookDiv.style.width="1px";hookDiv.style.height="1px";hookDiv.style.position="absolute";hookDiv.style.top="-1000px";hookDiv.style.left="-1000px";hookDiv.style.zIndex=(2).toString();hookDiv.style.backgroundColor="#FF0000";hookDiv.title="select to enable accessibility for this content";hookDiv.addEventListener("focus",function(){_this._isMobileAccessibility=!0;_this.activate();_this.destroyTouchHook()});
document.body.appendChild(hookDiv);this._hookDiv=hookDiv};AccessibilityManager.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)};AccessibilityManager.prototype.activate=function(){var _a;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(_a=this.renderer.view.parentNode)||void 0===
_a?void 0:_a.appendChild(this.div))};AccessibilityManager.prototype.deactivate=function(){var _a;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(_a=this.div.parentNode)||void 0===_a?void 0:_a.removeChild(this.div))};AccessibilityManager.prototype.updateAccessibleObjects=function(displayObject){if(displayObject.visible&&
displayObject.accessibleChildren){displayObject.accessible&&displayObject.interactive&&(displayObject._accessibleActive||this.addChild(displayObject),displayObject.renderId=this.renderId);displayObject=displayObject.children;for(var i=0;i<displayObject.length;i++)this.updateAccessibleObjects(displayObject[i])}};AccessibilityManager.prototype.update=function(){var now=performance.now();if(!(utils.isMobile.android.device&&now<this.androidUpdateCount)&&(this.androidUpdateCount=now+this.androidUpdateFrequency,
this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var _a=this.renderer.view.getBoundingClientRect(),top=_a.top;now=this.renderer;var viewWidth=now.width,viewHeight=now.height,resolution=now.resolution;now=_a.width/viewWidth*resolution;resolution*=_a.height/viewHeight;var div=this.div;div.style.left=_a.left+"px";div.style.top=top+"px";div.style.width=viewWidth+"px";div.style.height=viewHeight+"px";for(_a=0;_a<this.children.length;_a++)if(top=
this.children[_a],top.renderId!==this.renderId)top._accessibleActive=!1,utils.removeItems(this.children,_a,1),this.div.removeChild(top._accessibleDiv),this.pool.push(top._accessibleDiv),top._accessibleDiv=null,_a--;else if(div=top._accessibleDiv,viewWidth=top.hitArea,viewHeight=top.worldTransform,top.hitArea?(div.style.left=(viewHeight.tx+viewWidth.x*viewHeight.a)*now+"px",div.style.top=(viewHeight.ty+viewWidth.y*viewHeight.d)*resolution+"px",div.style.width=viewWidth.width*viewHeight.a*now+"px",
div.style.height=viewWidth.height*viewHeight.d*resolution+"px"):(viewWidth=top.getBounds(),this.capHitArea(viewWidth),div.style.left=viewWidth.x*now+"px",div.style.top=viewWidth.y*resolution+"px",div.style.width=viewWidth.width*now+"px",div.style.height=viewWidth.height*resolution+"px",div.title!==top.accessibleTitle&&null!==top.accessibleTitle&&(div.title=top.accessibleTitle),div.getAttribute("aria-label")!==top.accessibleHint&&null!==top.accessibleHint&&div.setAttribute("aria-label",top.accessibleHint)),
top.accessibleTitle!==div.title||top.tabIndex!==div.tabIndex)div.title=top.accessibleTitle,div.tabIndex=top.tabIndex,this.debug&&this.updateDebugHTML(div);this.renderId++}};AccessibilityManager.prototype.updateDebugHTML=function(div){div.innerHTML="type: "+div.type+"\x3c/br\x3e title : "+div.title+"\x3c/br\x3e tabIndex: "+div.tabIndex};AccessibilityManager.prototype.capHitArea=function(hitArea){0>hitArea.x&&(hitArea.width+=hitArea.x,hitArea.x=0);0>hitArea.y&&(hitArea.height+=hitArea.y,hitArea.y=0);
var _a=this.renderer,viewWidth=_a.width;_a=_a.height;hitArea.x+hitArea.width>viewWidth&&(hitArea.width=viewWidth-hitArea.x);hitArea.y+hitArea.height>_a&&(hitArea.height=_a-hitArea.y)};AccessibilityManager.prototype.addChild=function(displayObject){var div=this.pool.pop();div||(div=document.createElement("button"),div.style.width="100px",div.style.height="100px",div.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",div.style.position="absolute",div.style.zIndex=(2).toString(),
div.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?div.setAttribute("aria-live","off"):div.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?div.setAttribute("aria-relevant","additions"):div.setAttribute("aria-relevant","text"),div.addEventListener("click",this._onClick.bind(this)),div.addEventListener("focus",this._onFocus.bind(this)),div.addEventListener("focusout",this._onFocusOut.bind(this)));div.style.pointerEvents=displayObject.accessiblePointerEvents;
div.type=displayObject.accessibleType;displayObject.accessibleTitle&&null!==displayObject.accessibleTitle?div.title=displayObject.accessibleTitle:displayObject.accessibleHint&&null!==displayObject.accessibleHint||(div.title="displayObject "+displayObject.tabIndex);displayObject.accessibleHint&&null!==displayObject.accessibleHint&&div.setAttribute("aria-label",displayObject.accessibleHint);this.debug&&this.updateDebugHTML(div);displayObject._accessibleActive=!0;displayObject._accessibleDiv=div;div.displayObject=
displayObject;this.children.push(displayObject);this.div.appendChild(displayObject._accessibleDiv);displayObject._accessibleDiv.tabIndex=displayObject.tabIndex};AccessibilityManager.prototype._onClick=function(e){var interactionManager=this.renderer.plugins.interaction;e=e.target.displayObject;var eventData=interactionManager.eventData;interactionManager.dispatchEvent(e,"click",eventData);interactionManager.dispatchEvent(e,"pointertap",eventData);interactionManager.dispatchEvent(e,"tap",eventData)};
AccessibilityManager.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var interactionManager=this.renderer.plugins.interaction;interactionManager.dispatchEvent(e.target.displayObject,"mouseover",interactionManager.eventData)};AccessibilityManager.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var interactionManager=this.renderer.plugins.interaction;interactionManager.dispatchEvent(e.target.displayObject,
"mouseout",interactionManager.eventData)};AccessibilityManager.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()};AccessibilityManager.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()};AccessibilityManager.prototype.destroy=function(){this.destroyTouchHook();this.div=null;self.document.removeEventListener("mousemove",this._onMouseMove,!0);self.removeEventListener("keydown",this._onKeyDown);this.renderer=this.children=this.pool=null};return AccessibilityManager}();
exports.AccessibilityManager=global;exports.accessibleTarget=require}
//# sourceMappingURL=module$node_modules$$pixi$accessibility$dist$cjs$accessibility.js.map
